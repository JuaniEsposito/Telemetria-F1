import fastf1
from fastf1.plotting import setup_mpl
from matplotlib import pyplot as plt


# 1. Activar el almacenamiento en caché
fastf1.Cache.enable_cache('cache')

# 2. Configurar estilo de gráficos
setup_mpl()

# 3. Cargar sesión (año, Gran Premio, tipo)
session = fastf1.get_session(2023, 'Monza', 'Q')
session.load()

# 4. Seleccionar el piloto más rápido
fast_driver = session.laps.pick_drivers('VER').pick_fastest()

# 5. Obtener telemetría de la vuelta rápida
telemetria = fast_driver.get_car_data().add_distance()

# 6. Graficar la velocidad en función de la distancia
plt.figure(figsize=(10, 5))
plt.plot(telemetria['Distance'], telemetria['Speed'], color='red', label='Velocidad (km/h)')
plt.xlabel('Distancia (km)')
plt.ylabel('Velocidad (km/h)')
plt.title(f"Telemetría de {fast_driver['Driver']} - Vuelta más rápida en {session.event['EventName']}")
plt.legend()
plt.grid(True)
plt.show()
